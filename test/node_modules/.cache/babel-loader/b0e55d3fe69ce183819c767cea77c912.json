{"ast":null,"code":"import \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.concat.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"Doc\",\n  components: {\n    //InEditor,\n    mavonEditor: mavonEditor,\n    qrcode: Qrcode\n  },\n  data: function data() {\n    return {\n      pagePath: window.location.href,\n      tempauth: 0,\n      tempteamauth: 1,\n      submenuCurrent: \"\",\n      groupAuthValue: 0,\n      personAuthValue: 0,\n      content: \"\",\n      //输入的Markdown\n      old_content: \"\",\n      html: \"\",\n      //渲染的html文件\n      title: \"Untitled\",\n      lastetidtimeString: \"\",\n      creatorid: 0,\n      editcount: 0,\n      teamauth: 0,\n      auth: 0,\n      isTeammember: false,\n      iseditable: false,\n      iscommentable: false,\n      isteamauth: false,\n      teamid: 0,\n      docid: this.$route.params.id,\n      istrash: 0,\n      isFav: 1,\n      editrecord: [],\n      // data - comment list, userinfo - 当前用户信息, value - 新评论\n      data: [],\n      userinfo: {},\n      comment: \"\"\n    };\n  },\n  methods: {\n    $imgAdd: function $imgAdd(pos, $file) {\n      var _this = this;\n\n      // 第一步.将图片上传到服务器.\n      var formdata = new FormData();\n      formdata.append(\"image\", $file);\n      Vue.axios({\n        url: \"http://182.92.57.178:5000/pictures/add\",\n        method: \"post\",\n        data: formdata //headers: { 'Content-Type': 'multipart/form-data' },\n\n      }).then(function (url) {\n        // 第二步.将返回的url替换到文本原位置![...](0) -> ![...](url)\n\n        /**\r\n         * $vm 指为mavonEditor实例，可以通过如下两种方式获取\r\n         * 1. 通过引入对象获取: `import {mavonEditor} from ...` 等方式引入后，`$vm`为`mavonEditor`\r\n         * 2. 通过$refs获取: html声明ref : `<mavon-editor ref=md ></mavon-editor>，`$vm`为 `this.$refs.md`\r\n         */\n        _this.$refs.md.$img2Url(pos, url.data.url);\n\n        console.log(url.data.url);\n      });\n    },\n    $imgDel: function $imgDel(pos) {\n      delete this.img_file[pos];\n    },\n    textChange: function textChange(value, render) {\n      this.html = render;\n    },\n    getDoc: function getDoc() {\n      var that = this;\n      Vue.axios({\n        method: \"get\",\n        url: \"http://39.106.230.20:8090/document/\" + this.$route.params.id,\n        headers: {\n          token: this.$store.state.token\n        }\n      }).then(function (response) {\n        console.log(response.data);\n        that.title = response.data.contents.title;\n        that.content = response.data.contents.content;\n        that.old_content = response.data.contents.content;\n        that.lastetidtimeString = response.data.contents.lastetidtimeString;\n        that.editcount = response.data.contents.editcount;\n        that.auth = response.data.contents.auth;\n        that.teamauth = response.data.contents.teamauth;\n        that.createtime = response.data.contents.createtime;\n        that.docid = response.data.contents.docid;\n        that.creatorid = response.data.contents.creatorid;\n        that.istrash = response.data.contents.istrash;\n        that.teamid = response.data.contents.teamid;\n        that.isTeammember = response.data.isTeammember;\n        that.tempauth = that.auth;\n        that.tempteamauth = that.teamauth;\n\n        if (that.creatorid == that.$store.state.userid) {\n          that.iseditable = true;\n          that.iscommentable = true;\n        }\n\n        if (that.auth >= 3 || that.teamauth >= 3 && that.isTeammember) {\n          that.iscommentable = true;\n        }\n\n        if (that.auth >= 7 || that.teamauth >= 7 && that.isTeammember) {\n          that.iseditable = true;\n        }\n\n        if (that.$store.state.userid == null) {\n          that.iscommentable = false;\n          that.iseditable = false;\n        }\n\n        if (that.teamid != 0) {\n          if (that.creatorid == that.$store.state.userid) {\n            that.isteamauth = true;\n          }\n\n          Vue.axios({\n            method: \"get\",\n            url: \"http://39.106.230.20:8090/team/\" + that.teamid + \"/view\"\n          }).then(function (res) {\n            if (res.data.teamCreator.userid == that.$store.state.userid) {\n              that.isteamauth = true;\n              that.iscommentable = true;\n              that.iseditable = true;\n            }\n          });\n        }\n      });\n      Vue.axios({\n        method: \"get\",\n        url: \"http://39.106.230.20:8090/document/fav/\" + this.$route.params.id,\n        headers: {\n          token: this.$store.state.token\n        }\n      }).then(function (response) {\n        if (response.data.isFav == true) {\n          that.isFav = 1;\n        } else {\n          that.isFav = 0;\n        }\n      });\n    },\n    getRecord: function getRecord(docid) {\n      var that = this;\n      Vue.axios({\n        method: \"get\",\n        url: \" http://39.106.230.20:8090/document/\" + docid + \"/editRecord\",\n        headers: {\n          token: this.$store.state.token\n        }\n      }).then(function (response) {\n        that.editrecord = response.data.docRecord.slice(0, 10);\n\n        var _loop = function _loop(index) {\n          var element = that.editrecord[index];\n          Vue.axios({\n            method: \"get\",\n            url: \" http://39.106.230.20:8090/user/\" + element.userid\n          }).then(function (res) {\n            that.editrecord[index].userid = res.data.user.username;\n          });\n        };\n\n        for (var index = 0; index < that.editrecord.length; index++) {\n          _loop(index);\n        }\n      });\n    },\n    test: function test() {\n      console.log(this.html);\n    },\n    toWorkshop: function toWorkshop() {\n      this.$router.push({\n        path: \"/\"\n      });\n      location.reload();\n    },\n    saveDoc: function saveDoc() {\n      var that = this; //检测云端版本\n\n      Vue.axios({\n        method: \"get\",\n        url: \"http://39.106.230.20:8090/document/\" + this.$route.params.id,\n        headers: {\n          token: this.$store.state.token\n        }\n      }).then(function (res) {\n        if (that.old_content == res.data.contents.content) {\n          Vue.axios({\n            method: \"put\",\n            url: \"http://39.106.230.20:8090/document/\",\n            headers: {\n              token: that.$store.state.token\n            },\n            data: {\n              docid: that.docid,\n              title: that.title,\n              content: that.content,\n              lastedituserid: that.$store.state.userid,\n              auth: that.auth,\n              teamauth: that.teamauth,\n              istrash: that.istrash\n            }\n          }).then(function (response) {\n            console.log(response.data);\n\n            if (response.data.success == true) {\n              that.$message.success(\"保存成功！\", 1.5);\n              that.old_content = that.content;\n            } else {\n              that.$message.error(\"保存失败！\", 1.5);\n            }\n          });\n        } else {\n          that.$message.error(\"云端版本已更新，保存失败，请刷新页面再试（请注意保存当前的编辑）\", 5);\n        }\n      });\n    },\n    judgeFav: function judgeFav() {\n      if (this.isFav == 1) {\n        this.delFav();\n      } else this.addFav();\n    },\n    addFav: function addFav() {\n      console.log(\"Faving...Now:\" + this.isFav);\n      var that = this;\n      Vue.axios({\n        method: \"post\",\n        url: \"http://39.106.230.20:8090/document/fav\",\n        headers: {\n          token: this.$store.state.token\n        },\n        data: {\n          docid: this.docid\n        }\n      }).then(function (response) {\n        console.log(response.data);\n\n        if (response.data.success == true) {\n          that.$message.success(\"收藏成功\", 1.5);\n          that.isFav = 1;\n        } else {\n          that.$message.error(\"竟然收藏失败了？！\", 1.5);\n        }\n      });\n    },\n    delFav: function delFav() {\n      console.log(\"Faving...Now:\" + this.isFav);\n      var that = this;\n      Vue.axios({\n        method: \"delete\",\n        url: \"http://39.106.230.20:8090/document/fav\",\n        headers: {\n          token: this.$store.state.token\n        },\n        data: {\n          docid: this.docid\n        }\n      }).then(function (response) {\n        console.log(response.data);\n\n        if (response.data.success == true) {\n          that.$message.success(\"成功取消收藏\", 1.5);\n          that.isFav = 0;\n        } else {\n          that.$message.error(\"竟然取消收藏失败了？！\", 1.5);\n        }\n      });\n    },\n    onAuthChange: function onAuthChange() {\n      var that = this;\n      Vue.axios({\n        method: \"put\",\n        url: \"http://39.106.230.20:8090/document/mod_auth\",\n        headers: {\n          token: this.$store.state.token\n        },\n        data: {\n          docid: this.docid,\n          auth: this.tempauth\n        }\n      }).then(function (response) {\n        if (response.data.success == true) {\n          that.$message.success(\"权限更改成功！\", 1);\n          that.auth = that.tempauth;\n        } else {\n          that.$message.error(\"权限更改失败！\", 1);\n        }\n      });\n    },\n    onTeamAuthChange: function onTeamAuthChange() {\n      var that = this;\n      Vue.axios({\n        method: \"put\",\n        url: \"http://39.106.230.20:8090/document/mod_teamauth\",\n        headers: {\n          token: this.$store.state.token\n        },\n        data: {\n          docid: this.docid,\n          teamauth: this.tempteamauth\n        }\n      }).then(function (response) {\n        if (response.data.success == true) {\n          that.$message.success(\"权限更改成功！\", 1);\n          that.teamauth = that.tempteamauth;\n        } else {\n          that.$message.error(\"权限更改失败！\", 1);\n        }\n      });\n    },\n    stopShare: function stopShare() {\n      this.tempauth = 0;\n      var that = this;\n      Vue.axios({\n        method: \"put\",\n        url: \"http://39.106.230.20:8090/document/mod_auth\",\n        headers: {\n          token: this.$store.state.token\n        },\n        data: {\n          docid: this.docid,\n          auth: 0\n        }\n      }).then(function (response) {\n        if (response.data.success == true) {\n          that.$message.success(\"已停止共享！\", 1);\n          that.auth = that.tempauth;\n        } else {\n          that.$message.error(\"权限更改失败！\", 1);\n        }\n      });\n    },\n    // comment\n    getInfo: function getInfo() {\n      var _this2 = this;\n\n      Vue.axios({\n        method: \"get\",\n        url: \"http://39.106.230.20:8090/user/info\",\n        headers: {\n          token: this.$store.state.token\n        }\n      }).then(function (response) {\n        _this2.userinfo = response.data;\n      });\n    },\n    toUserInfo: function toUserInfo(userid) {\n      this.$router.push({\n        path: \"/userinfo/\" + userid\n      });\n    },\n    getCommentList: function getCommentList() {\n      var _this3 = this;\n\n      Vue.axios({\n        method: \"get\",\n        url: \"http://39.106.230.20:8090/document/\".concat(this.docid, \"/comments\")\n      }).then(function (response) {\n        var _response$data = response.data,\n            commentsAndUsernameAndAvatar = _response$data.commentsAndUsernameAndAvatar,\n            success = _response$data.success,\n            message = _response$data.message;\n        _this3.data = commentsAndUsernameAndAvatar;\n\n        _this3.data.forEach(function (x) {\n          return x.comment.commenttime = moment(x.comment.commenttimestring);\n        });\n\n        if (success == false) {\n          _this3.$message.error(message, 1.5);\n        }\n      });\n    },\n    handleSubmitComment: function handleSubmitComment() {\n      var _this4 = this;\n\n      Vue.axios({\n        method: \"post\",\n        url: \"http://39.106.230.20:8090/document/\".concat(this.docid, \"/createComment\"),\n        data: {\n          content: this.comment\n        },\n        headers: {\n          token: this.$store.state.token\n        }\n      }).then(function (response) {\n        var _response$data2 = response.data,\n            success = _response$data2.success,\n            message = _response$data2.message;\n\n        if (success == true) {\n          _this4.comment = \"\";\n\n          _this4.$message.success(message, 1.5);\n        } else {\n          _this4.$message.error(message, 1.5);\n        }\n\n        _this4.getCommentList();\n      });\n    },\n    handleDeleteComment: function handleDeleteComment(item) {\n      var _this5 = this;\n\n      console.log(item);\n      Vue.axios({\n        method: \"get\",\n        url: \"http://39.106.230.20:8090/document/\".concat(item.comment.docid, \"/comment/\").concat(item.comment.comid, \"/delete\"),\n        headers: {\n          token: this.$store.state.token\n        }\n      }).then(function (response) {\n        var _response$data3 = response.data,\n            success = _response$data3.success,\n            message = _response$data3.message;\n\n        if (success == true) {\n          _this5.$message.success(message, 1.5);\n        } else {\n          _this5.$message.error(message, 1.5);\n        }\n\n        _this5.getCommentList();\n      });\n    },\n    onShareCopy: function onShareCopy(e) {\n      this.$message.success(\"成功复制链接~\", 1);\n      console.log(e);\n    },\n    onShareCopyError: function onShareCopyError(e) {\n      this.$message.error(\"复制链接失败！\", 1);\n      console.log(e);\n    },\n    handleChange: function handleChange(e) {\n      this.comment = e.target.value;\n    }\n  },\n  created: function created() {\n    this.getDoc();\n    this.getRecord(this.$route.params.id);\n  },\n  mounted: function mounted() {\n    this.getInfo();\n    this.getCommentList();\n  }\n};","map":{"version":3,"mappings":"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","names":["name","components","mavonEditor","qrcode","data","pagePath","tempauth","tempteamauth","submenuCurrent","groupAuthValue","personAuthValue","content","old_content","html","title","lastetidtimeString","creatorid","editcount","teamauth","auth","isTeammember","iseditable","iscommentable","isteamauth","teamid","docid","istrash","isFav","editrecord","userinfo","comment","methods","$imgAdd","pos","$file","formdata","Vue","url","method","then","console","$imgDel","textChange","value","render","getDoc","headers","token","that","getRecord","index","test","toWorkshop","path","location","saveDoc","lastedituserid","judgeFav","addFav","delFav","onAuthChange","onTeamAuthChange","stopShare","getInfo","toUserInfo","userid","getCommentList","response","commentsAndUsernameAndAvatar","success","message","handleSubmitComment","handleDeleteComment","item","onShareCopy","e","onShareCopyError","handleChange","created","mounted"],"sourceRoot":"src/views","sources":["Doc.vue"],"sourcesContent":["<template>\r\n    <div style=\"text-align:center;background:#FAFAFA;min-width:1900px\">\r\n    <div class=\"subNavi\">\r\n      <a-row>\r\n        <a-col :span=\"15\">\r\n          <div style=\"margin:8px 0 0 128px;text-align:left\">\r\n            <a-icon @click=\"toWorkshop\" type=\"arrow-left\" class=\"returnNarrow\" />\r\n            <a-popover placement=\"bottom\">\r\n              <template slot=\"content\">点击即可收藏文档哦~</template>\r\n              <a-rate\r\n                @change=\"judgeFav\"\r\n                :count=\"1\"\r\n                :value=\"isFav\"\r\n                style=\"margin:0px 0 5px 5px;font-size:24px;\"\r\n              />\r\n              <!--↑说起来你可能不信，但是这个可以当按钮来用-->\r\n            </a-popover>\r\n            <!--span style=\"font-size:24px;margin-right:5px\">{{title}}</span-->\r\n            <span style=\"font-size:24px;margin-right:5px\">\r\n              <b>\r\n                <a-input\r\n                  v-model=\"title\"\r\n                  size=\"large\"\r\n                  style=\"border:0;width:200px;background:#FAFAFA;font-size:18px\"\r\n                />\r\n              </b>\r\n            </span>\r\n            <span style=\"margin-left:5px\">上次修改时间是{{lastetidtimeString}}，共计修改了{{editcount}}次。</span>\r\n          </div>\r\n        </a-col>\r\n        <a-col :span=\"3\"></a-col>\r\n        <a-col :span=\"6\">\r\n          <div style=\"margin:11px 48px 0 0;text-align:right\">\r\n            <a-popover placement=\"bottomLeft\" trigger=\"click\">\r\n              <template slot=\"content\" style=\"text-align:right\">\r\n                <div style=\"margin-top:12px\">团队权限设置</div>\r\n                <div style=\"margin-top:5px\">\r\n                  <a-radio-group\r\n                    style=\"margin-bottom:12px\"\r\n                    v-model=\"tempteamauth\"\r\n                    @change=\"onTeamAuthChange\"\r\n                  >\r\n                    <a-radio-button :value=\"1\">仅查看</a-radio-button>\r\n                    <a-radio-button :value=\"3\">可讨论</a-radio-button>\r\n                    <a-radio-button :value=\"7\">可编辑</a-radio-button>\r\n                  </a-radio-group>\r\n                </div>\r\n              </template>\r\n              <a-button style=\"margin-right:24px\" v-if=\"teamid!=0&&isteamauth\">\r\n                <a-icon type=\"safety\" />团队权限\r\n              </a-button>\r\n            </a-popover>\r\n            <a-popover placement=\"bottomLeft\" trigger=\"click\">\r\n              <template slot=\"content\" style=\"text-align:center\">\r\n                <div style=\"margin-top:12px\" v-if=\"creatorid==$store.state.userid\">权限设置</div>\r\n                <div style=\"margin-top:5px;text-align:center\" v-if=\"creatorid==$store.state.userid\">\r\n                  <a-radio-group v-model=\"tempauth\" @change=\"onAuthChange\">\r\n                    <a-radio-button :value=\"1\">仅查看</a-radio-button>\r\n                    <a-radio-button :value=\"3\">可讨论</a-radio-button>\r\n                    <a-radio-button :value=\"7\">可编辑</a-radio-button>\r\n                  </a-radio-group>\r\n                </div>\r\n                <div style=\"margin-top:12px\" v-if=\"tempauth!=0\">\r\n                  <div>分享链接</div>\r\n                  <a-input-search\r\n                    :value=\"pagePath\"\r\n                    @search=\"onShareCopy\"\r\n                    style=\"margin-top:5px;width:220px\"\r\n                    disabled\r\n                  >\r\n                    <a-button\r\n                      class=\"tag-read\"\r\n                      v-clipboard:copy=\"pagePath\"\r\n                      v-clipboard:success=\"onShareCopy\"\r\n                      v-clipboard:error=\"onShareCopyError\"\r\n                      @click=\"onShareCopy\"\r\n                      slot=\"enterButton\"\r\n                    >复制</a-button>\r\n                  </a-input-search>\r\n                </div>\r\n                <div v-if=\"tempauth!=0\" style=\"text-align:center;margin:12px;\">\r\n                  <qrcode :value=\"pagePath\" :options=\"{ size: 120 }\"></qrcode>\r\n                </div>\r\n                <div style=\"text-align:center;margin-top:10px;margin-bottom:10px\" v-if=\"tempauth==0\">文档未公开</div>\r\n                <div style=\"text-align:center\">\r\n                  <a-button\r\n                    style=\"margin:0px 10px 10px 0px\"\r\n                    @click=\"stopShare\"\r\n                    v-if=\"creatorid==$store.state.userid\"\r\n                  >停止分享</a-button>\r\n                </div>\r\n              </template>\r\n              <a-button>\r\n                <a-icon type=\"share-alt\" />分享\r\n              </a-button>\r\n            </a-popover>\r\n            <!--a-button @click=\"test\" ><a-icon type=\"save\"/>TEST_测试</a-button-->\r\n          </div>\r\n        </a-col>\r\n      </a-row>\r\n    </div>\r\n\r\n    <div style=\"text-align:center\">\r\n      <a-row>\r\n        <a-col :span=\"5\">\r\n          <a-timeline style=\"width:260px;margin:64px\">\r\n            <a-timeline-item\r\n              v-for=\"item in editrecord\"\r\n              :key=\"item.edittime\"\r\n            >{{item.userid}}于{{item.edittimestring}}编辑</a-timeline-item>\r\n          </a-timeline>\r\n        </a-col>\r\n        <a-col :span=\"14\">\r\n          <div class=\"text-editor\">\r\n            <mavon-editor\r\n              v-bind:editable=\"iseditable\"\r\n              :subfield=\"iseditable\"\r\n              :toolbarsFlag=\"iseditable\"\r\n              defaultOpen=\"preview\"\r\n              v-model=\"content\"\r\n              ref=\"md\"\r\n              @imgAdd=\"$imgAdd\"\r\n              @imgDel=\"$imgDel\"\r\n              @save=\"saveDoc\"\r\n              @change=\"textChange\"\r\n              style=\"min-height:1000px;z-index:0\"\r\n            />\r\n          </div>\r\n        </a-col>\r\n        <a-col :span=\"5\">\r\n          <div>\r\n            <div style=\"margin:48px\">\r\n              <a-list\r\n                class=\"commentList\"\r\n                :header=\"`${data.length}个评论`\"\r\n                item-layout=\"horizontal\"\r\n                :data-source=\"data\"\r\n              >\r\n                <a-list-item slot=\"renderItem\" slot-scope=\"item\">\r\n                  <a-comment>\r\n                    <p style=\"cursor:pointer\" slot=\"author\" @click=\"toUserInfo(item.comment.userid)\">{{item.username}}</p>\r\n                    <a-avatar\r\n                      slot=\"avatar\"\r\n                      :src=\"item.avatar\"\r\n                      @click=\"toUserInfo(item.comment.userid)\"\r\n                    />\r\n                    <p slot=\"content\" style=\"text-align:left\">{{ item.comment.content }}</p>\r\n                    <a-tooltip\r\n                      slot=\"datetime\"\r\n                      :title=\"item.comment.commenttime.format('YYYY-MM-DD HH:mm:ss')\"\r\n                    >\r\n                      <span>{{ item.comment.commenttime.fromNow() }}</span>\r\n                    </a-tooltip>\r\n                  </a-comment>\r\n                  <a-button\r\n                    v-if=\"userinfo.userid === item.comment.userid || userinfo.userid === creatorid\"\r\n                    type=\"link\"\r\n                    size=\"small\"\r\n                    style=\"margin-top:-45px\"\r\n                    @click=\"handleDeleteComment(item)\"\r\n                  >删除</a-button>\r\n                  <!-- 如果item的评论者或者该文档的所有者的userid 等于 当前userid，则该评论可删除 -->\r\n                </a-list-item>\r\n              </a-list>\r\n              <a-row v-if=\"iscommentable\">\r\n                <a-col :span=\"4\">\r\n                  <div style=\"text-align:left\">\r\n                    <a-avatar slot=\"avatar\" :src=\"userinfo.avatar\" :alt=\"userinfo.username\" />\r\n                  </div>\r\n                </a-col>\r\n                <a-col :span=\"20\" style=\"text-align:left;margin-bottom:-12px\">\r\n                  <div>\r\n                    <a\r\n                      style=\"margin:12px 0 0 0px;font-size:16px;padding-top:10px\"\r\n                      href=\"#/profile\"\r\n                    >{{userinfo.username}}</a>\r\n                  </div>\r\n                  <div style=\"font-size:12px;margin-left:0px\">{{userinfo.description}}</div>\r\n                </a-col>\r\n              </a-row>\r\n\r\n              <a-comment class=\"addComment\" v-if=\"iscommentable\">\r\n                <div slot=\"content\">\r\n                  <a-form-item>\r\n                    <a-textarea :rows=\"4\" :value=\"comment\" @change=\"handleChange\" />\r\n                  </a-form-item>\r\n                  <a-form-item style=\"text-align:right\">\r\n                    <a-button html-type=\"submit\" type=\"primary\" @click=\"handleSubmitComment\">评论</a-button>\r\n                  </a-form-item>\r\n                </div>\r\n              </a-comment>\r\n            </div>\r\n          </div>\r\n        </a-col>\r\n      </a-row>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style>\r\n.text-editor {\r\n  width: 1100px;\r\n  background: #ffffff;\r\n  margin: 24px auto;\r\n}\r\n\r\n.text-editor2 {\r\n  border: 1px hsl(0, 0%, 82.7%) solid;\r\n  border-radius: var(--ck-border-radius);\r\n  box-shadow: 0 0 5px hsla(0, 0%, 0%, 0.1);\r\n}\r\n\r\n.subNavi {\r\n  width: 100%;\r\n  height: 56px;\r\n  background: #fafafa;\r\n  border-bottom: 1px rgb(236, 236, 236) solid;\r\n}\r\n\r\n.returnNarrow {\r\n  font-size: 20px;\r\n  margin-right: 10px;\r\n  cursor: pointer;\r\n}\r\n\r\n.commentBox {\r\n  width: 300px;\r\n  margin: 24px auto;\r\n  background: #ffffff;\r\n  border: 1px hsl(0, 0%, 92.7%) solid;\r\n  border-radius: var(--ck-border-radius);\r\n  box-shadow: 0 0 5px hsla(0, 0%, 0%, 0.1);\r\n}\r\n</style>\r\n\r\n<script>\r\n\r\n\r\nexport default {\r\n  name: \"Doc\",\r\n  components: {\r\n    //InEditor,\r\n    mavonEditor,\r\n    qrcode: Qrcode,\r\n  },\r\n  data() {\r\n    return {\r\n      pagePath: window.location.href,\r\n      tempauth: 0,\r\n      tempteamauth: 1,\r\n      submenuCurrent: \"\",\r\n      groupAuthValue: 0,\r\n      personAuthValue: 0,\r\n      content: \"\", //输入的Markdown\r\n      old_content: \"\",\r\n      html: \"\", //渲染的html文件\r\n      title: \"Untitled\",\r\n      lastetidtimeString: \"\",\r\n      creatorid: 0,\r\n      editcount: 0,\r\n      teamauth: 0,\r\n      auth: 0,\r\n      isTeammember: false,\r\n      iseditable: false,\r\n      iscommentable: false,\r\n      isteamauth: false,\r\n      teamid: 0,\r\n      docid: this.$route.params.id,\r\n      istrash: 0,\r\n      isFav: 1,\r\n      editrecord: [],\r\n      // data - comment list, userinfo - 当前用户信息, value - 新评论\r\n      data: [],\r\n      userinfo: {},\r\n      comment: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    $imgAdd(pos, $file) {\r\n      // 第一步.将图片上传到服务器.\r\n      var formdata = new FormData();\r\n      formdata.append(\"image\", $file);\r\n      Vue.axios({\r\n        url: \"http://182.92.57.178:5000/pictures/add\",\r\n        method: \"post\",\r\n        data: formdata,\r\n        //headers: { 'Content-Type': 'multipart/form-data' },\r\n      }).then((url) => {\r\n        // 第二步.将返回的url替换到文本原位置![...](0) -> ![...](url)\r\n        /**\r\n         * $vm 指为mavonEditor实例，可以通过如下两种方式获取\r\n         * 1. 通过引入对象获取: `import {mavonEditor} from ...` 等方式引入后，`$vm`为`mavonEditor`\r\n         * 2. 通过$refs获取: html声明ref : `<mavon-editor ref=md ></mavon-editor>，`$vm`为 `this.$refs.md`\r\n         */\r\n        this.$refs.md.$img2Url(pos, url.data.url);\r\n        console.log(url.data.url);\r\n      });\r\n    },\r\n    $imgDel(pos) {\r\n      delete this.img_file[pos];\r\n    },\r\n    textChange(value, render) {\r\n      this.html = render;\r\n    },\r\n    getDoc() {\r\n      var that = this;\r\n      Vue.axios({\r\n        method: \"get\",\r\n        url: \"http://39.106.230.20:8090/document/\" + this.$route.params.id,\r\n        headers: {\r\n          token: this.$store.state.token,\r\n        },\r\n      }).then(function (response) {\r\n        console.log(response.data);\r\n        that.title = response.data.contents.title;\r\n        that.content = response.data.contents.content;\r\n        that.old_content = response.data.contents.content;\r\n        that.lastetidtimeString = response.data.contents.lastetidtimeString;\r\n        that.editcount = response.data.contents.editcount;\r\n        that.auth = response.data.contents.auth;\r\n        that.teamauth = response.data.contents.teamauth;\r\n        that.createtime = response.data.contents.createtime;\r\n        that.docid = response.data.contents.docid;\r\n        that.creatorid = response.data.contents.creatorid;\r\n        that.istrash = response.data.contents.istrash;\r\n        that.teamid = response.data.contents.teamid;\r\n        that.isTeammember = response.data.isTeammember;\r\n        that.tempauth = that.auth;\r\n        that.tempteamauth = that.teamauth;\r\n        if (that.creatorid == that.$store.state.userid) {\r\n          that.iseditable = true;\r\n          that.iscommentable = true;\r\n        }\r\n        if (that.auth >= 3 || (that.teamauth >= 3 && that.isTeammember)) {\r\n          that.iscommentable = true;\r\n        }\r\n        if (that.auth >= 7 || (that.teamauth >= 7 && that.isTeammember)) {\r\n          that.iseditable = true;\r\n        }\r\n        if (that.$store.state.userid == null) {\r\n          that.iscommentable = false;\r\n          that.iseditable = false;\r\n        }\r\n        if (that.teamid != 0) {\r\n          if (that.creatorid == that.$store.state.userid) {\r\n            that.isteamauth = true;\r\n          }\r\n          Vue.axios({\r\n            method: \"get\",\r\n            url: \"http://39.106.230.20:8090/team/\" + that.teamid + \"/view\",\r\n          }).then(function (res) {\r\n            if (res.data.teamCreator.userid == that.$store.state.userid) {\r\n              that.isteamauth = true;\r\n              that.iscommentable = true;\r\n              that.iseditable = true;\r\n            }\r\n          });\r\n        }\r\n      });\r\n      Vue.axios({\r\n        method: \"get\",\r\n        url: \"http://39.106.230.20:8090/document/fav/\" + this.$route.params.id,\r\n        headers: {\r\n          token: this.$store.state.token,\r\n        },\r\n      }).then(function (response) {\r\n        if (response.data.isFav == true) {\r\n          that.isFav = 1;\r\n        } else {\r\n          that.isFav = 0;\r\n        }\r\n      });\r\n    },\r\n    getRecord(docid) {\r\n      var that = this;\r\n      Vue.axios({\r\n        method: \"get\",\r\n        url: \" http://39.106.230.20:8090/document/\" + docid + \"/editRecord\",\r\n        headers: {\r\n          token: this.$store.state.token,\r\n        },\r\n      }).then(function (response) {\r\n        that.editrecord = response.data.docRecord.slice(0,10);\r\n        for (let index = 0; index < that.editrecord.length; index++) {\r\n          const element = that.editrecord[index];\r\n          Vue.axios({\r\n            method: \"get\",\r\n            url: \" http://39.106.230.20:8090/user/\" + element.userid,\r\n          }).then(function (res) {\r\n            that.editrecord[index].userid = res.data.user.username;\r\n          });\r\n        }\r\n      });\r\n    },\r\n    test() {\r\n      console.log(this.html);\r\n    },\r\n    toWorkshop() {\r\n      this.$router.push({ path: \"/\" });\r\n      location.reload();\r\n    },\r\n    saveDoc() {\r\n      var that = this;\r\n      //检测云端版本\r\n      Vue.axios({\r\n        method: \"get\",\r\n        url: \"http://39.106.230.20:8090/document/\" + this.$route.params.id,\r\n        headers: {\r\n          token: this.$store.state.token,\r\n        },\r\n      }).then(function (res) {\r\n        if (that.old_content == res.data.contents.content) {\r\n          Vue.axios({\r\n            method: \"put\",\r\n            url: \"http://39.106.230.20:8090/document/\",\r\n            headers: {\r\n              token: that.$store.state.token,\r\n            },\r\n            data: {\r\n              docid: that.docid,\r\n              title: that.title,\r\n              content: that.content,\r\n              lastedituserid: that.$store.state.userid,\r\n              auth: that.auth,\r\n              teamauth: that.teamauth,\r\n              istrash: that.istrash,\r\n            },\r\n          }).then(function (response) {\r\n            console.log(response.data);\r\n            if (response.data.success == true) {\r\n              that.$message.success(\"保存成功！\", 1.5);\r\n              that.old_content = that.content;\r\n            } else {\r\n              that.$message.error(\"保存失败！\", 1.5);\r\n            }\r\n          });\r\n        } else {\r\n          that.$message.error(\r\n            \"云端版本已更新，保存失败，请刷新页面再试（请注意保存当前的编辑）\",\r\n            5\r\n          );\r\n        }\r\n      });\r\n    },\r\n    judgeFav() {\r\n      if (this.isFav == 1) {\r\n        this.delFav();\r\n      } else this.addFav();\r\n    },\r\n    addFav() {\r\n      console.log(\"Faving...Now:\" + this.isFav);\r\n      var that = this;\r\n      Vue.axios({\r\n        method: \"post\",\r\n        url: \"http://39.106.230.20:8090/document/fav\",\r\n        headers: {\r\n          token: this.$store.state.token,\r\n        },\r\n        data: {\r\n          docid: this.docid,\r\n        },\r\n      }).then(function (response) {\r\n        console.log(response.data);\r\n        if (response.data.success == true) {\r\n          that.$message.success(\"收藏成功\", 1.5);\r\n          that.isFav = 1;\r\n        } else {\r\n          that.$message.error(\"竟然收藏失败了？！\", 1.5);\r\n        }\r\n      });\r\n    },\r\n    delFav() {\r\n      console.log(\"Faving...Now:\" + this.isFav);\r\n      var that = this;\r\n      Vue.axios({\r\n        method: \"delete\",\r\n        url: \"http://39.106.230.20:8090/document/fav\",\r\n        headers: {\r\n          token: this.$store.state.token,\r\n        },\r\n        data: {\r\n          docid: this.docid,\r\n        },\r\n      }).then(function (response) {\r\n        console.log(response.data);\r\n        if (response.data.success == true) {\r\n          that.$message.success(\"成功取消收藏\", 1.5);\r\n          that.isFav = 0;\r\n        } else {\r\n          that.$message.error(\"竟然取消收藏失败了？！\", 1.5);\r\n        }\r\n      });\r\n    },\r\n    onAuthChange() {\r\n      var that = this;\r\n      Vue.axios({\r\n        method: \"put\",\r\n        url: \"http://39.106.230.20:8090/document/mod_auth\",\r\n        headers: {\r\n          token: this.$store.state.token,\r\n        },\r\n        data: {\r\n          docid: this.docid,\r\n          auth: this.tempauth,\r\n        },\r\n      }).then(function (response) {\r\n        if (response.data.success == true) {\r\n          that.$message.success(\"权限更改成功！\", 1);\r\n          that.auth = that.tempauth;\r\n        } else {\r\n          that.$message.error(\"权限更改失败！\", 1);\r\n        }\r\n      });\r\n    },\r\n    onTeamAuthChange() {\r\n      var that = this;\r\n      Vue.axios({\r\n        method: \"put\",\r\n        url: \"http://39.106.230.20:8090/document/mod_teamauth\",\r\n        headers: {\r\n          token: this.$store.state.token,\r\n        },\r\n        data: {\r\n          docid: this.docid,\r\n          teamauth: this.tempteamauth,\r\n        },\r\n      }).then(function (response) {\r\n        if (response.data.success == true) {\r\n          that.$message.success(\"权限更改成功！\", 1);\r\n          that.teamauth = that.tempteamauth;\r\n        } else {\r\n          that.$message.error(\"权限更改失败！\", 1);\r\n        }\r\n      });\r\n    },\r\n    stopShare() {\r\n      this.tempauth = 0;\r\n      var that = this;\r\n      Vue.axios({\r\n        method: \"put\",\r\n        url: \"http://39.106.230.20:8090/document/mod_auth\",\r\n        headers: {\r\n          token: this.$store.state.token,\r\n        },\r\n        data: {\r\n          docid: this.docid,\r\n          auth: 0,\r\n        },\r\n      }).then(function (response) {\r\n        if (response.data.success == true) {\r\n          that.$message.success(\"已停止共享！\", 1);\r\n          that.auth = that.tempauth;\r\n        } else {\r\n          that.$message.error(\"权限更改失败！\", 1);\r\n        }\r\n      });\r\n    },\r\n    // comment\r\n    getInfo() {\r\n      Vue.axios({\r\n        method: \"get\",\r\n        url: \"http://39.106.230.20:8090/user/info\",\r\n        headers: {\r\n          token: this.$store.state.token,\r\n        },\r\n      }).then((response) => {\r\n        this.userinfo = response.data;\r\n      });\r\n    },\r\n    toUserInfo(userid) {\r\n      this.$router.push({ path: \"/userinfo/\" + userid });\r\n    },\r\n    getCommentList() {\r\n      Vue.axios({\r\n        method: \"get\",\r\n        url: `http://39.106.230.20:8090/document/${this.docid}/comments`,\r\n      }).then((response) => {\r\n        const {\r\n          commentsAndUsernameAndAvatar,\r\n          success,\r\n          message,\r\n        } = response.data;\r\n        this.data = commentsAndUsernameAndAvatar;\r\n        this.data.forEach(\r\n          (x) => (x.comment.commenttime = moment(x.comment.commenttimestring))\r\n        );\r\n        if (success == false) {\r\n          this.$message.error(message, 1.5);\r\n        }\r\n      });\r\n    },\r\n    handleSubmitComment() {\r\n      Vue.axios({\r\n        method: \"post\",\r\n        url: `http://39.106.230.20:8090/document/${this.docid}/createComment`,\r\n        data: {\r\n          content: this.comment,\r\n        },\r\n        headers: {\r\n          token: this.$store.state.token,\r\n        },\r\n      }).then((response) => {\r\n        const { success, message } = response.data;\r\n        if (success == true) {\r\n          this.comment = \"\";\r\n          this.$message.success(message, 1.5);\r\n        } else {\r\n          this.$message.error(message, 1.5);\r\n        }\r\n        this.getCommentList();\r\n      });\r\n    },\r\n    handleDeleteComment(item) {\r\n      console.log(item);\r\n      Vue.axios({\r\n        method: \"get\",\r\n        url: `http://39.106.230.20:8090/document/${item.comment.docid}/comment/${item.comment.comid}/delete`,\r\n        headers: {\r\n          token: this.$store.state.token,\r\n        },\r\n      }).then((response) => {\r\n        const { success, message } = response.data;\r\n        if (success == true) {\r\n          this.$message.success(message, 1.5);\r\n        } else {\r\n          this.$message.error(message, 1.5);\r\n        }\r\n        this.getCommentList();\r\n      });\r\n    },\r\n    onShareCopy(e) {\r\n      this.$message.success(\"成功复制链接~\", 1);\r\n      console.log(e);\r\n    },\r\n    onShareCopyError(e) {\r\n      this.$message.error(\"复制链接失败！\", 1);\r\n      console.log(e);\r\n    },\r\n    handleChange(e) {\r\n      this.comment = e.target.value;\r\n    },\r\n  },\r\n  created: function () {\r\n    this.getDoc();\r\n    this.getRecord(this.$route.params.id);\r\n  },\r\n  mounted() {\r\n    this.getInfo();\r\n    this.getCommentList();\r\n  },\r\n};\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}