{"ast":null,"code":"import \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.test.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport qs from \"qs\";\nimport Vue from \"vue\";\nexport default {\n  name: \"NewLogin\",\n  data: function data() {\n    return {\n      form: {\n        username: \"\",\n        email: \"\",\n        password: \"\",\n        phone: \"\",\n        repassword: \"\",\n        authcode: \"\"\n      },\n      token: \"\",\n      timer: null,\n      count: 0,\n      errorLogin: false\n    };\n  },\n  methods: {\n    register: function register() {\n      var that = this;\n      var regEmail = /^[A-Za-z0-9\\u4e00-\\u9fa5]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/;\n      var regPhone = /^[0-9]{11}$/;\n      var errorTip = \"\";\n      if (this.form.username == \"\") errorTip = \"请输入您的用户名\";else if (this.form.password == \"\" || this.form.repassword == \"\") errorTip = \"请输入您的密码\";else if (this.form.email == \"\") errorTip = \"请输入您的邮箱\";else if (this.form.phone == \"\") errorTip = \"请输入您的手机号码\";else if (this.form.authcode == \"\") errorTip = \"请输入邮箱验证码\";else if (!regEmail.test(this.form.email)) errorTip = \"请输入正确的邮箱\";else if (!regPhone.test(this.form.phone)) errorTip = \"请输入正确的手机号码\";else if (this.form.password != this.form.repassword) errorTip = \"两次输入的密码不同\";\n\n      if (errorTip != \"\") {\n        this.$message.error(errorTip);\n        return;\n      }\n\n      Vue.axios({\n        method: \"post\",\n        url: \"http://10.135.50.67:8080/register\",\n        data: {\n          username: this.form.username,\n          password: this.form.password,\n          email: this.form.email,\n          phone: this.form.phone,\n          code: this.form.authcode\n        }\n      }).then(function (response) {\n        console.log(response.data);\n\n        if (response.data.success == true) {\n          that.$message.success(\"注册成功，即将跳转登录页面\").then(function () {\n            return that.$router.push({\n              path: \"/login\"\n            });\n          });\n        } else {\n          that.$message.error(response.data.message);\n        }\n      });\n    },\n    sendMail: function sendMail() {\n      var that = this;\n      Vue.axios({\n        method: \"post\",\n        url: \"http://39.106.230.20:8090/code\",\n        data: {\n          username: this.username,\n          email: this.email\n        }\n      }).then(function (response) {\n        console.log(response.data);\n\n        if (response.data.success == true) {\n          that.$message.success(\"验证码已发送\");\n          that.count = 60;\n          that.timer = setInterval(that.startTimer, 1000);\n        } else {\n          that.$message.error(response.data.message);\n        }\n      });\n    },\n    startTimer: function startTimer() {\n      this.count -= 1;\n\n      if (this.count == 0) {\n        clearInterval(this.timer);\n      }\n    }\n  },\n  created: function created() {\n    this.$store.state.showNav = false;\n  },\n  destroyed: function destroyed() {\n    this.$store.state.showNav = true;\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACA;EACAA,gBADA;EAEAC,IAFA,kBAEA;IACA;MACAC;QACAC,YADA;QAEAC,SAFA;QAGAC,YAHA;QAIAC,SAJA;QAKAC,cALA;QAMAC;MANA,CADA;MASAC,SATA;MAUAC,WAVA;MAWAC,QAXA;MAYAC;IAZA;EAcA,CAjBA;EAkBAC;IACAC,QADA,sBACA;MACA;MACA;MACA;MACA;MACA,yDACA,4DACAC,qBADA,KAEA,qDACA,uDACA,yDACA,gEACA,kEACA,gDACAA;;MACA;QACA;QACA;MACA;;MACAC;QACAC,cADA;QAEAC,wCAFA;QAGAjB;UACAE,4BADA;UAEAE,4BAFA;UAGAD,sBAHA;UAIAE,sBAJA;UAKAa;QALA;MAHA,GAUAC,IAVA,CAUA;QACAC;;QACA;UACAC,cACAC,OADA,CACA,eADA,EAEAH,IAFA,CAEA;YAAA;cAAAI;YAAA;UAAA,CAFA;QAGA,CAJA,MAIA;UACAF;QACA;MACA,CAnBA;IAoBA,CAxCA;IAyCAG,QAzCA,sBAyCA;MACA;MACAT;QACAC,cADA;QAEAC,qCAFA;QAGAjB;UACAE,uBADA;UAEAC;QAFA;MAHA,GAOAgB,IAPA,CAOA;QACAC;;QACA;UACAC;UACAA;UACAA;QACA,CAJA,MAIA;UACAA;QACA;MACA,CAhBA;IAiBA,CA5DA;IA6DAI,UA7DA,wBA6DA;MACA;;MACA;QACAC;MACA;IACA;EAlEA,CAlBA;EAsFAC,OAtFA,qBAsFA;IACA;EACA,CAxFA;EAyFAC,SAzFA,uBAyFA;IACA;EACA;AA3FA","names":["name","data","form","username","email","password","phone","repassword","authcode","token","timer","count","errorLogin","methods","register","errorTip","Vue","method","url","code","then","console","that","success","path","sendMail","startTimer","clearInterval","created","destroyed"],"sourceRoot":"src/views","sources":["Register.vue"],"sourcesContent":["<template>\r\n  <div id=\"login\" class=\"login\">\r\n    <img class=\"bgbox\" id=\"bgbox\" alt=\"\" src=\"../../src/assets/E0K1{XGUHZ52)1RNVD8C00V.gif\">\r\n    <div class=\"wrap\" style=\"width:400px;height:1000px;margin:100px auto;text-align:center\">\r\n      <h1>注册用户</h1>\r\n      <el-form :model=\"form\" ref=\"form\" class=\"form\">\r\n        <el-form-item prop=\"username\">\r\n          <el-input placeholder=\"用户名\" type=\"username\" v-model=\"form.username\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"email\">\r\n          <el-input placeholder=\"邮箱\" type=\"email\" v-model=\"form.email\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item id=\"password\" prop=\"password\">\r\n          <el-input\r\n              placeholder=\"密码\"\r\n              show-password\r\n              type=\"password\"\r\n              v-model=\"form.password\"\r\n              autocomplete=\"off\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item id=\"password\" prop=\"password\">\r\n          <el-input\r\n              placeholder=\"重复密码\"\r\n              show-password\r\n              type=\"password\"\r\n              v-model=\"form.repassword\"\r\n              autocomplete=\"off\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item id=\"phone\" prop=\"phone\">\r\n          <el-input\r\n              placeholder=\"手机号\"\r\n              type=\"phone\"\r\n              v-model=\"form.phone\"\r\n              autocomplete=\"off\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item id=\"phone\" prop=\"phone\">\r\n           <el-input placeholder=\"请输入内容\" v-model=\"input3\" class=\"input-with-select\">   \r\n            <el-button slot=\"append\" icon=\"el-icon-search\" v-if=\"count===0\">获取验证码</el-button>\r\n        </el-input>\r\n        </el-form-item>\r\n       \r\n        <el-form-item id=\"authcode\" prop=\"authcode\">\r\n          <el-input\r\n            style=\"float:left;\"\r\n            placeholder=\"邮箱验证码\"\r\n            @search=\"sendMail\"\r\n            v-model=\"authcode\"\r\n          >\r\n          <el-button style=\"width:100px;float:left;\" v-if=\"count===0\">获取验证码</el-button>\r\n          <el-button style=\"width:0px;float:left;\" v-else disabled>{{count}}秒后重试</el-button>\r\n          </el-input>\r\n          \r\n        </el-form-item>\r\n        \r\n\r\n        <el-form-item class=\"btn_login\">\r\n          <el-button type=\"primary\" @click=\"login\">注&nbsp;&nbsp;册</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div class=\"suffix\">\r\n        <p @click=\"login\">已有账号？点击这里登录</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport qs from \"qs\";\r\nimport Vue from \"vue\";\r\nexport default {\r\n  name: \"NewLogin\",\r\n  data() {\r\n    return {\r\n      form: {\r\n        username: \"\",\r\n        email: \"\",\r\n        password: \"\",\r\n        phone: \"\",\r\n        repassword: \"\",\r\n        authcode: \"\",\r\n      },\r\n        token: \"\",\r\n        timer: null,\r\n        count: 0,\r\n        errorLogin: false,\r\n    }\r\n  },\r\n  methods: {\r\n    register() {\r\n      var that = this;\r\n      var regEmail = /^[A-Za-z0-9\\u4e00-\\u9fa5]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/;\r\n      var regPhone = /^[0-9]{11}$/;\r\n      var errorTip = \"\";\r\n      if (this.form.username == \"\") errorTip = \"请输入您的用户名\";\r\n      else if (this.form.password == \"\" || this.form.repassword == \"\")\r\n        errorTip = \"请输入您的密码\";\r\n      else if (this.form.email == \"\") errorTip = \"请输入您的邮箱\";\r\n      else if (this.form.phone == \"\") errorTip = \"请输入您的手机号码\";\r\n      else if (this.form.authcode == \"\") errorTip = \"请输入邮箱验证码\";\r\n      else if (!regEmail.test(this.form.email)) errorTip = \"请输入正确的邮箱\";\r\n      else if (!regPhone.test(this.form.phone)) errorTip = \"请输入正确的手机号码\";\r\n      else if (this.form.password != this.form.repassword)\r\n        errorTip = \"两次输入的密码不同\";\r\n      if (errorTip != \"\") {\r\n        this.$message.error(errorTip);\r\n        return;\r\n      }\r\n      Vue.axios({\r\n        method: \"post\",\r\n        url: \"http://10.135.50.67:8080/register\",\r\n        data: {\r\n          username: this.form.username,\r\n          password: this.form.password,\r\n          email: this.form.email,\r\n          phone: this.form.phone,\r\n          code: this.form.authcode,\r\n        },\r\n      }).then(function (response) {\r\n        console.log(response.data);\r\n        if (response.data.success == true) {\r\n          that.$message\r\n            .success(\"注册成功，即将跳转登录页面\")\r\n            .then(() => that.$router.push({ path: \"/login\" }));\r\n        } else {\r\n          that.$message.error(response.data.message);\r\n        }\r\n      });\r\n    },\r\n    sendMail() {\r\n      var that = this;\r\n      Vue.axios({\r\n        method: \"post\",\r\n        url: \"http://39.106.230.20:8090/code\",\r\n        data: {\r\n          username: this.username,\r\n          email: this.email,\r\n        },\r\n      }).then(function (response) {\r\n        console.log(response.data);\r\n        if (response.data.success == true) {\r\n          that.$message.success(\"验证码已发送\");\r\n          that.count = 60;\r\n          that.timer = setInterval(that.startTimer, 1000);\r\n        } else {\r\n          that.$message.error(response.data.message);\r\n        }\r\n      });\r\n    },\r\n    startTimer() {\r\n      this.count -= 1;\r\n      if (this.count == 0) {\r\n        clearInterval(this.timer);\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    this.$store.state.showNav = false;\r\n  },\r\n  destroyed() {\r\n    this.$store.state.showNav = true;\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n\r\n\r\n<style scoped>\r\n#login {\r\n  font-family: 'Noto Serif SC', serif;\r\n  margin-top: 60px;\r\n}\r\n#login >>> .el-input__inner {\r\n  font-family: 'Noto Serif SC', serif;\r\n}\r\n#login .bgbox {\r\n  display: block;\r\n  opacity: 1;\r\n  z-index: -3;\r\n  position: fixed;\r\n  left: 0;\r\n  top: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n  transition: opacity 1s,transform .25s,filter .25s;\r\n  backface-visibility: hidden;\r\n}\r\n#login .logo {\r\n  cursor: pointer;\r\n  overflow: hidden;\r\n  height: 150px;\r\n}\r\n#login .wrap {\r\n  width: 300px;\r\n  height: 315px;\r\n  padding: 0 25px 0 25px;\r\n  line-height: 40px;\r\n  position: relative;\r\n  display: inline-block;\r\n  background-color: rgba(255, 255, 255, 0.85);\r\n  border-radius: 20px;\r\n}\r\n#login .btn_login {\r\n  margin-top: 25px;\r\n  text-align: center;\r\n}\r\n#login .btn_login button{\r\n  line-height: 10px;\r\n  font-family: 'Noto Serif SC', serif;\r\n  width: 100%;\r\n  height: 38px;\r\n}\r\n#login .suffix {\r\n  font-size:14px;\r\n  line-height:10px;\r\n  color:#999;\r\n  cursor: pointer;\r\n  float:right;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}